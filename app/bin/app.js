sumeru.config({httpServerPort:8080,sumeruPath:"/../sumeru"}),sumeru.router.add({pattern:"/hall",action:"App.hall"}),App.hall=sumeru.controller.create(function(e,t){var n=function(){t.messages=e.subscribe("pub-message",function(e){t.bind("message-hall",{data:e.find()})})};e.onload=function(){return[n]},e.onrender=function(e){e("hall",["push","left"])},e.onready=function(){Library.touch.on(".messageSubmit","touchstart",r),Library.touch.on(".clearHistory","touchstart",i)};var r=function(){var e=document.getElementById("messageInput"),n=e.value.trim();return""==n?!1:(t.messages.add({content:n}),t.messages.save(),void(e.value=""))},i=function(){t.messages.destroy(),t.messages.save()}}),Model.message=function(e){e.config={fields:[{name:"content",type:"text"},{name:"time",type:"datetime",defaultValue:"now()"}]}};